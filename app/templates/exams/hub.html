<!-- Assessments Hub Page -->
<div class="px-4 py-4 lg:px-6 lg:py-5 space-y-6">
    <!-- Page Header -->
    <div class="flex items-center justify-between">
        <div class="flex flex-col gap-1">
            <h1 class="text-xl font-black text-slate-900 tracking-tight uppercase">Assessments Hub</h1>
            <p class="text-[11px] font-bold text-slate-400 uppercase tracking-wider">Select a class to manage
                assessments</p>
        </div>
    </div>

    <!-- Classes Section -->
    <div id="classesView" class="space-y-4">
        <div class="flex items-center gap-2">
            <span
                class="text-[10px] font-black text-slate-900 bg-slate-100 px-2 py-1 rounded-md uppercase tracking-widest">Available
                Classes</span>
            <div class="h-px bg-slate-100 w-12"></div>
        </div>
        <div class="bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="bg-slate-50/50 border-b border-slate-100">
                        <th class="px-5 py-3 text-[9px] font-black text-slate-400 uppercase tracking-widest">Class Name
                        </th>
                        <th class="px-5 py-3 text-[9px] font-black text-slate-400 uppercase tracking-widest">Code</th>
                        <th class="px-5 py-3 text-[9px] font-black text-slate-400 uppercase tracking-widest">Students
                        </th>
                        <th class="px-5 py-3 text-[9px] font-black text-slate-400 uppercase tracking-widest text-right">
                            Actions</th>
                    </tr>
                </thead>
                <tbody id="classesTableBody">
                    <!-- Skeleton Rows -->
                    <tr class="animate-pulse border-b border-slate-50">
                        <td class="px-5 py-4">
                            <div class="h-3 w-24 bg-slate-100 rounded"></div>
                        </td>
                        <td class="px-5 py-4">
                            <div class="h-3 w-16 bg-slate-100 rounded"></div>
                        </td>
                        <td class="px-5 py-4">
                            <div class="h-5 w-20 bg-slate-100 rounded-lg"></div>
                        </td>
                        <td class="px-5 py-4 text-right">
                            <div class="h-8 w-24 bg-slate-100 rounded-lg ml-auto"></div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    let classes = [];

    document.addEventListener('DOMContentLoaded', function () {
        loadClasses();
    });

    async function loadClasses() {
        try {
            const response = await fetch('/api/classes');
            const data = await response.json();
            classes = Array.isArray(data) ? data : (data.classes || data.data || []);
            renderClasses();
        } catch (error) {
            console.error('Error loading classes:', error);
            classes = [];
        }
    }

    function renderClasses() {
        const tbody = document.getElementById('classesTableBody');
        tbody.innerHTML = '';

        if (classes.length === 0) {
            tbody.innerHTML = '<tr><td colspan="4" class="px-5 py-8 text-center text-xs text-slate-400">No classes found</td></tr>';
            return;
        }

        classes.forEach(cls => {
            const row = document.createElement('tr');
            row.className = 'border-b border-slate-50 hover:bg-slate-50/50 cursor-pointer transition-colors';
            row.onclick = () => window.location.href = `/assessments/${cls.id}`;
            row.innerHTML = `
                <td class="px-5 py-4">
                    <div class="text-xs font-semibold text-slate-900">${cls.name}</div>
                </td>
                <td class="px-5 py-4">
                    <div class="text-xs text-slate-500">${cls.code || '-'}</div>
                </td>
                <td class="px-5 py-4">
                    <span class="inline-flex items-center px-2.5 py-1 rounded-lg text-[10px] font-bold bg-slate-100 text-slate-600">
                        ${cls.student_count || 0} students
                    </span>
                </td>
                <td class="px-5 py-4 text-right">
                    <div class="flex items-center justify-end gap-3">
                        <button class="text-xs font-bold text-slate-900 hover:text-slate-600 flex items-center justify-end gap-1.5 transition-colors">
                            Manage <i class="fas fa-arrow-right text-[10px]"></i>
                        </button>
                    </div>
                </td>
            `;
            tbody.appendChild(row);
        });
    }
</script>