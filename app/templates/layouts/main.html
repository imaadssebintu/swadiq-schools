<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} - Swadiq Schools</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { 50: '#f5f7ff', 100: '#ebf0ff', 200: '#d6e0ff', 300: '#b3c7ff', 400: '#8faaed', 500: '#6366f1', 600: '#4f46e5', 700: '#4338ca', 800: '#3730a3', 900: '#312e81' },
                        slate: { 50: '#f8fafc', 100: '#f1f5f9', 200: '#e2e8f0', 300: '#cbd5e1', 400: '#94a3b8', 500: '#64748b', 600: '#475569', 700: '#334155', 800: '#1e293b', 900: '#0f172a' }
                    },
                    fontFamily: { 'sans': ['Inter', 'system-ui', 'sans-serif'] },
                    animation: { 'fade-in': 'fadeIn 0.5s ease-in-out', 'slide-in': 'slideIn 0.3s ease-out', 'pulse-slow': 'pulse-slow 2s infinite' },
                    keyframes: {
                        fadeIn: { 'from': { opacity: '0' }, 'to': { opacity: '1' } },
                        slideIn: { 'from': { transform: 'translateX(-100%)' }, 'to': { transform: 'translateX(0)' } },
                        'pulse-slow': { '0%, 100%': { opacity: '1' }, '50%': { opacity: '0.5' } }
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        .glass-card {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 20px 0 rgba(0, 0, 0, 0.05);
        }

        .glass-sidebar {
            background: #ffffff;
            border-right: 1px solid #e2e8f0;
        }

        .premium-gradient {
            background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #e2e8f0;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #cbd5e1;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            padding: 0.5rem 0.75rem;
            font-size: 0.75rem;
            font-weight: 700;
            border-radius: 0.5rem;
            transition: all 0.2s;
            color: #64748b;
        }

        .sidebar-link:hover {
            background-color: rgba(255, 255, 255, 0.5);
            color: #4f46e5;
        }

        .sidebar-link-active {
            background-color: rgba(99, 102, 241, 0.1);
            color: #4f46e5;
            border-left: 3px solid #6366f1;
        }
    </style>
</head>

<body class="bg-slate-50 font-sans antialiased text-slate-900 min-h-screen">
    <!-- Dynamic Background Removed for Solid Feel -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-white border-b border-slate-200 h-14">
        <div class="flex items-center justify-between h-14 px-4 lg:px-6">
            <div class="flex items-center space-x-4">
                <button id="sidebarToggle"
                    class="lg:hidden p-2 rounded-xl text-slate-500 hover:text-indigo-600 hover:bg-slate-50 transition-all duration-300">
                    <i id="menuIcon" class="fas fa-bars-staggered text-sm"></i>
                    <i id="closeIcon" class="fas fa-times text-sm hidden"></i>
                </button>
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 rounded-lg premium-gradient flex items-center justify-center text-white"><i
                            class="fas fa-graduation-cap text-sm"></i></div>
                    <h1 class="text-sm font-black text-slate-900 tracking-tight uppercase">Swadiq <span
                            class="text-indigo-600">SMS</span></h1>
                </div>
            </div>
            <div class="flex items-center space-x-2">
                <div class="hidden lg:flex items-center">
                    <div class="relative group">
                        <input type="text" placeholder="Search anything..."
                            class="w-64 pl-9 pr-4 py-1.5 text-[10px] font-bold border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500/50 bg-slate-50 transition-all duration-300 group-hover:bg-white">
                        <i
                            class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 text-[10px] group-hover:text-indigo-500 transition-colors"></i>
                    </div>
                </div>
                <button
                    class="relative p-2 rounded-xl text-slate-500 hover:text-indigo-600 hover:bg-slate-50 transition-all duration-300">
                    <i class="fas fa-bell text-[14px]"></i>
                    <span
                        class="absolute top-1 right-1 w-4 h-4 premium-gradient text-white text-[8px] font-black rounded-full flex items-center justify-center border-2 border-white shadow-sm">3</span>
                </button>
                <div class="relative">
                    <button id="userMenuButton"
                        class="flex items-center space-x-2 p-1 rounded-xl text-slate-600 hover:bg-slate-50 transition-all duration-300 border border-transparent hover:border-slate-200">
                        <div
                            class="w-8 h-8 premium-gradient rounded-lg flex items-center justify-center shadow-indigo-200 shadow-lg">
                            <i class="fas fa-user text-white text-[10px]"></i>
                        </div>
                        <div class="hidden sm:block text-left">
                            <p class="text-[10px] font-black text-slate-900 leading-tight">{{.FirstName}} {{.LastName}}
                            </p>
                            <p class="text-[8px] font-bold text-slate-400 leading-tight">Administrator</p>
                        </div>
                        <i class="fas fa-chevron-down text-[10px] text-slate-300 px-1"></i>
                    </button>
                    <div id="userDropdown"
                        class="hidden absolute right-0 mt-3 w-64 bg-white rounded-2xl shadow-[0_15px_40px_rgba(0,0,0,0.12)] border border-slate-200 py-1.5 z-50 animate-fade-in">
                        <!-- User Header Card -->
                        <div class="px-4 py-3 border-b border-slate-100 mb-1">
                            <div class="flex items-center gap-3">
                                <div class="relative">
                                    <div
                                        class="w-10 h-10 premium-gradient rounded-xl flex items-center justify-center shadow-md shadow-indigo-100 overflow-hidden">
                                        <i class="fas fa-user text-white text-base"></i>
                                    </div>
                                    <span
                                        class="absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-emerald-500 border-2 border-white rounded-full"></span>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <p class="text-[11px] font-black text-slate-900 leading-tight truncate">
                                        {{.FirstName}} {{.LastName}}</p>
                                    <p class="text-[9px] font-bold text-slate-400 leading-tight truncate">{{.Email}}</p>
                                    <p class="text-[8px] font-black text-indigo-600 mt-1 uppercase tracking-wider">
                                        Administrator</p>
                                </div>
                            </div>
                        </div>

                        <!-- Menu Sections -->
                        <div class="px-2 pb-1.5 space-y-0.5">
                            <div class="px-3 py-1">
                                <p class="text-[8px] font-black text-slate-400 uppercase tracking-widest">Account &
                                    Settings</p>
                            </div>
                            <a href="/auth/profile"
                                class="flex items-center px-2 py-1.5 text-[10px] font-bold text-slate-600 hover:bg-slate-50 hover:text-indigo-600 rounded-xl transition-all duration-200 group">
                                <i
                                    class="fas fa-id-card-clip w-5 mr-3 text-sm text-slate-400 group-hover:text-indigo-600"></i>
                                View Profile
                            </a>
                            <a href="/settings"
                                class="flex items-center px-2 py-1.5 text-[10px] font-bold text-slate-600 hover:bg-slate-50 hover:text-indigo-600 rounded-xl transition-all duration-200 group">
                                <i class="fas fa-gear w-5 mr-3 text-sm text-slate-400 group-hover:text-indigo-600"></i>
                                App Settings
                            </a>
                            <a href="/help"
                                class="flex items-center px-2 py-1.5 text-[10px] font-bold text-slate-600 hover:bg-slate-50 hover:text-indigo-600 rounded-xl transition-all duration-200 group">
                                <i
                                    class="fas fa-headset w-5 mr-3 text-sm text-slate-400 group-hover:text-indigo-600"></i>
                                Support Center
                            </a>
                        </div>

                        <!-- Logout Section -->
                        <div class="mt-1 px-2 pt-1 border-t border-slate-100">
                            <form method="POST" action="/auth/logout">
                                <button type="submit"
                                    class="flex items-center w-full px-2 py-1.5 text-[10px] font-black text-rose-500 hover:bg-rose-50 rounded-xl transition-all duration-200 group text-left">
                                    <i class="fas fa-power-off w-5 mr-3 text-sm"></i>
                                    Terminate Session
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="flex h-screen pt-14">
        <aside id="sidebar"
            class="fixed lg:static inset-y-0 left-0 z-40 w-56 glass-sidebar transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out lg:mt-0"
            style="top: 3.5rem;">
            <div class="flex flex-col h-full">
                <nav class="flex-1 overflow-y-auto sidebar-scrollbar p-3 pt-4 space-y-4">
                    {{$curr := .CurrentPage}}
                    <div>
                        <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4 px-3">Main
                            Navigation</h3>
                        <div class="space-y-0.5">
                            <a href="/dashboard"
                                class="sidebar-link {{if eq $curr `dashboard`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-house w-5 mr-1 text-[13px]"></i>Dashboard</a>
                            <a href="/students"
                                class="sidebar-link {{if eq $curr `students`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-user-graduate w-5 mr-1 text-[13px]"></i>Students</a>
                            <a href="/teachers"
                                class="sidebar-link {{if eq $curr `teachers`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-chalkboard-teacher w-5 mr-1 text-[13px]"></i>Teachers</a>
                            <a href="/classes"
                                class="sidebar-link {{if eq $curr `classes`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-school w-5 mr-1 text-[13px]"></i>Classes</a>
                            <a href="/subjects"
                                class="sidebar-link {{if eq $curr `subjects`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-book-open w-5 mr-1 text-[13px]"></i>Subjects</a>
                            <a href="/departments"
                                class="sidebar-link {{if eq $curr `departments`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-landmark w-5 mr-1 text-[13px]"></i>Departments</a>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4 px-3">Academic
                        </h3>
                        <div class="space-y-1">
                            <a href="/events" class="sidebar-link {{if eq $curr `events`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-calendar-alt w-5 mr-1 text-[13px]"></i>Events</a>

                            <a href="/attendance"
                                class="sidebar-link {{if eq $curr `attendance`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-calendar-check w-5 mr-1 text-[13px]"></i>Attendance</a>
                            <a href="/settings/academic"
                                class="sidebar-link {{if eq $curr `academic`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-sliders w-5 mr-1 text-[13px]"></i>Academic Settings</a>
                            <a href="/exams" class="sidebar-link {{if eq $curr `exams`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-clipboard-list w-5 mr-1 text-[13px]"></i>Exams</a>
                            <a href="/grades" class="sidebar-link {{if eq $curr `grades`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-medal w-5 mr-1 text-[13px]"></i>Grades</a>
                            <a href="/timetable"
                                class="sidebar-link {{if eq $curr `timetable`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-clock w-5 mr-1 text-[13px]"></i>Timetable</a>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4 px-3">
                            Financial</h3>
                        <div class="space-y-1">
                            <a href="/fees" class="sidebar-link {{if eq $curr `fees`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-wallet w-5 mr-1 text-[13px]"></i>Fees Ledger</a>
                            <a href="/expenses"
                                class="sidebar-link {{if eq $curr `expenses`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-receipt w-5 mr-1 text-[13px]"></i>Expenses</a>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4 px-3">System
                        </h3>
                        <div class="space-y-1">
                            <a href="/reports"
                                class="sidebar-link {{if eq $curr `reports`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-chart-line w-5 mr-1 text-[13px]"></i>Analytics</a>
                            <a href="/notifications"
                                class="sidebar-link {{if eq $curr `notifications`}}sidebar-link-active{{end}}"><i
                                    class="fas fa-bell w-5 mr-1 text-[13px]"></i>Notifications</a>
                        </div>
                    </div>
                </nav>
                <div class="flex-shrink-0 p-4 mt-auto">
                    <div class="flex items-center space-x-3 p-3 glass-card rounded-xl">
                        <div
                            class="w-8 h-8 rounded-lg premium-gradient flex items-center justify-center text-white shadow-sm">
                            <i class="fas fa-shield-check text-xs"></i>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="text-[10px] font-black text-slate-800 uppercase tracking-wider truncate">System
                                Status</p>
                            <div class="flex items-center gap-1.5"><span
                                    class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"></span>
                                <p class="text-[10px] font-bold text-emerald-600">Operational</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
        <div id="overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden lg:hidden"></div>
        <main class="flex-1 overflow-y-auto">
            <div>{{embed}}</div>
        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () { initializeSidebar(); initializeUserDropdown(); initializeSearch(); });
        function initializeSidebar() {
            const sidebar = document.getElementById('sidebar'); const overlay = document.getElementById('overlay'); const sidebarToggle = document.getElementById('sidebarToggle'); const menuIcon = document.getElementById('menuIcon'); const closeIcon = document.getElementById('closeIcon');
            function toggleSidebar() { sidebar.classList.toggle('-translate-x-full'); overlay.classList.toggle('hidden'); menuIcon.classList.toggle('hidden'); closeIcon.classList.toggle('hidden'); }
            sidebarToggle?.addEventListener('click', toggleSidebar); overlay?.addEventListener('click', toggleSidebar);
            window.addEventListener('popstate', function () { if (window.innerWidth < 1024) { sidebar.classList.add('-translate-x-full'); overlay.classList.add('hidden'); menuIcon.classList.remove('hidden'); closeIcon.classList.add('hidden'); } });
            window.addEventListener('resize', function () { if (window.innerWidth >= 1024) { sidebar.classList.remove('-translate-x-full'); overlay.classList.add('hidden'); menuIcon.classList.remove('hidden'); closeIcon.classList.add('hidden'); } });
        }
        function initializeUserDropdown() {
            const userMenuButton = document.getElementById('userMenuButton'); const userDropdown = document.getElementById('userDropdown');
            userMenuButton?.addEventListener('click', function (e) { e.stopPropagation(); userDropdown.classList.toggle('hidden'); });
            document.addEventListener('click', function (e) { if (userDropdown && !userMenuButton.contains(e.target) && !userDropdown.contains(e.target)) { userDropdown.classList.add('hidden'); } });
            document.addEventListener('keydown', function (e) { if (e.key === 'Escape' && userDropdown) { userDropdown.classList.add('hidden'); } });
        }
        function initializeSearch() {
            const searchInput = document.querySelector('input[placeholder="Search..."]');
            searchInput?.addEventListener('keydown', function (e) { if (e.key === 'Enter') { e.preventDefault(); console.log('Search:', this.value); } });
        }
    </script>
</body>

</html>